{
  "name": "SalesOrder.Create",
  "description": "Service to create a Sales Order on My-ERP",
  "methods": ["GET"],
  "path": "/salesOrder",
  "pipeline": {
    "declarations": ["logger", "salesOrderCreateRequest"],
    "assign1": [{
      "var": "logger.serviceName",
      "value": "SalesOrderCreate"
    },
    {
      "var": "salesOrderCreateRequest",
      "transformationFile": {"path": "./JQ/salesOrderCreateRequest.jq", "parameters": [{"salesOrder": "$req.body"}]}
    }],

    "invoke1": {
      "url": "http://my-erp/order",
      "method": "POST",
      "contentType": "application/json",
      "body": "$salesOrderCreateRequest",
      "outputVar": "orderResponse"
    },

    "assign2": [{
      "var": "res.result.salesOrderNumber",
      "value": "$orderResponse.number"
    },
    {
      "var": "res.result.message",
      "value": "Order created sucessfully, without warnings."
    }]
  }
}